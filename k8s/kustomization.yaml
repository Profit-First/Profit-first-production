apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Namespace for all resources
namespace: profit-first

# Resources in deployment order
resources:
  # 1. Namespace first
  - namespace.yaml
  
  # 2. ConfigMaps and Secrets
  - backend/backend-configmap.yaml
  - backend/backend-secret.yaml
  - frontend/frontend-configmap.yaml
  
  # 3. Redis (dependency for backend) - using local storage
  - redis/redis-deployment.yaml
  - redis/redis-service.yaml
  
  # 4. Backend (depends on Redis)
  - backend/backend-deployment.yaml
  - backend/backend-service.yaml
  - backend/backend-hpa.yaml
  
  # 5. Frontend (depends on backend)
  - frontend/frontend-deployment.yaml
  - frontend/frontend-service.yaml
  
  # 6. Ingress (external access) - OPTIONAL for testing
  # Uncomment when you want to use domain-based access
  # - ingress/ingress.yaml
